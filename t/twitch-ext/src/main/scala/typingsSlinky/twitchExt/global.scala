package typingsSlinky.twitchExt

import typingsSlinky.twitchExt.Twitch.ext.Authorized
import typingsSlinky.twitchExt.Twitch.ext.BitsProduct
import typingsSlinky.twitchExt.Twitch.ext.BitsTransaction
import typingsSlinky.twitchExt.Twitch.ext.Rig
import typingsSlinky.twitchExt.Twitch.ext.Viewer
import typingsSlinky.twitchExt.Twitch.ext.features.ChangedKey
import typingsSlinky.twitchExt.anon.Content
import typingsSlinky.twitchExt.anon.PartialContext
import typingsSlinky.twitchExt.anon.X
import typingsSlinky.twitchExt.twitchExtBooleans.`false`
import typingsSlinky.twitchExt.twitchExtBooleans.`true`
import typingsSlinky.twitchExt.twitchExtStrings.arePlayerControlsVisible
import typingsSlinky.twitchExt.twitchExtStrings.bitrate
import typingsSlinky.twitchExt.twitchExtStrings.bufferSize
import typingsSlinky.twitchExt.twitchExtStrings.displayResolution
import typingsSlinky.twitchExt.twitchExtStrings.game
import typingsSlinky.twitchExt.twitchExtStrings.hlsLatencyBroadcaster
import typingsSlinky.twitchExt.twitchExtStrings.hostingInfo
import typingsSlinky.twitchExt.twitchExtStrings.isFullScreen
import typingsSlinky.twitchExt.twitchExtStrings.isMuted
import typingsSlinky.twitchExt.twitchExtStrings.isPaused
import typingsSlinky.twitchExt.twitchExtStrings.isTheatreMode
import typingsSlinky.twitchExt.twitchExtStrings.language
import typingsSlinky.twitchExt.twitchExtStrings.mode
import typingsSlinky.twitchExt.twitchExtStrings.playbackMode
import typingsSlinky.twitchExt.twitchExtStrings.production
import typingsSlinky.twitchExt.twitchExtStrings.theme
import typingsSlinky.twitchExt.twitchExtStrings.videoResolution
import typingsSlinky.twitchExt.twitchExtStrings.volume
import scala.scalajs.js
import scala.scalajs.js.`|`
import scala.scalajs.js.annotation.{JSGlobalScope, JSGlobal, JSImport, JSName, JSBracketAccess}

@JSGlobalScope
@js.native
object global extends js.Object {
  
  @js.native
  object Twitch extends js.Object {
    
    @js.native
    object ext extends js.Object {
      
      /**
        * This encodes the environment. For external users, this is always production.
        */
      val environment: production = js.native
      
      /**
        * This function binds the callback to listen to the target topic.
        *
        * @param target Target topic. Often this is "broadcast" but it might be "whisper-<userId>".
        * @param callback These fields correspond to the values in the send() message, except the message is always a string.
        * @see https://dev.twitch.tv/docs/extensions/reference/#listen
        */
      def listen(
        target: String,
        callback: js.Function3[/* target */ String, /* contentType */ String, /* message */ String, Unit]
      ): Unit = js.native
      
      /**
        * This function binds the callback to the initial values and changes to the authorization data.
        *
        * @param authCallback This callback is fired each time the JWT is refreshed.
        * @see https://dev.twitch.tv/docs/extensions/reference/#onauthorized
        */
      def onAuthorized(authCallback: js.Function1[/* auth */ Authorized, Unit]): Unit = js.native
      
      /**
        * This function binds the callback to the initial values and changes to the context.
        *
        * @param contextCallback This callback is fired when the context of an extension is fired.
        * @see https://dev.twitch.tv/docs/extensions/reference/#oncontext
        */
      def onContext(
        contextCallback: js.Function2[
              /* context */ PartialContext, 
              /* changed */ js.Array[
                /* keyof twitch-ext.anon.PartialContext */ playbackMode | videoResolution | hostingInfo | isFullScreen | volume | isTheatreMode | theme | hlsLatencyBroadcaster | arePlayerControlsVisible | language | bitrate | isPaused | bufferSize | displayResolution | mode | game | isMuted
              ], 
              Unit
            ]
      ): Unit = js.native
      
      /**
        * This function binds the callback to any internal error.
        *
        * @param errorCallback This callback is fired if any errors are generated by the extension helper.
        * @see https://dev.twitch.tv/docs/extensions/reference/#onerror
        */
      def onError(errorCallback: js.Function1[/* errorValue */ js.Any, Unit]): Unit = js.native
      
      /**
        * This function allows an extension to adjust its visibility when the viewer highlights the extension by hovering
        * over the extension’s menu icon or open menu, in the video player. The function applies only to video-overlay and
        * component Extensions.
        *
        * @param callback This callback is called whenever the extension is or is no longer highlighted by the user.
        * @see https://dev.twitch.tv/docs/extensions/reference/#onhighlightchanged
        */
      def onHighlightChanged(callback: js.Function1[/* isHighlighted */ Boolean, Unit]): Unit = js.native
      
      /**
        * This function registers a callback that gets called whenever an extension changes position in the player. This
        * occurs only for video-component extensions. This also is triggered as the extension loads.
        *
        * @param callback This callback is called whenever an extension changes position in the player.
        * @see https://dev.twitch.tv/docs/extensions/reference/#onpositionchanged
        */
      def onPositionChanged(callback: js.Function1[/* position */ X, Unit]): Unit = js.native
      
      /**
        * This function registers a callback that gets called whenever an extension is hidden/re-shown. (This occurs only
        * for mobile or component extensions.) When an extension is not visible in the mobile app, it does not receive
        * onContext updates and must perform only minimal work in the background.
        *
        * @param callback This callback is called whenever an extension is hidden/re-shown.
        * @see https://dev.twitch.tv/docs/extensions/reference/#onvisibilitychanged
        */
      @JSName("onVisibilityChanged")
      def onVisibilityChanged_false(callback: js.Function1[`false`, Unit]): Unit = js.native
      @JSName("onVisibilityChanged")
      def onVisibilityChanged_true(callback: js.Function2[`true`, /* context */ PartialContext, Unit]): Unit = js.native
      
      /**
        * Helper methods for the Twitch Extension rig.
        * @see https://github.com/twitchdev/developer-rig
        */
      val rig: Rig = js.native
      
      def send(target: String, contentType: String, message: String): Unit = js.native
      /**
        * This function can be called by the front end to send directly to PubSub.
        *
        * @param target Target topic. Often this is "broadcast" but it might be "whisper-<userId>".
        * @param contentType type of the serialized message; for example, "application/json".
        * @param message Either an object that will be automatically serialized as JSON or a string.
        * @see https://dev.twitch.tv/docs/extensions/reference/#send
        */
      def send(target: String, contentType: String, message: js.Object): Unit = js.native
      
      /**
        * This function unbinds the listen callback from the target.
        *
        * @param target Target topic. Often this is "broadcast" but it might be "whisper-<userId>".
        * @param callback These fields correspond to the values in the send() message, except the message is always a string.
        * @see https://dev.twitch.tv/docs/extensions/reference/#unlisten
        */
      def unlisten(
        target: String,
        callback: js.Function3[/* target */ String, /* contentType */ String, /* message */ String, Unit]
      ): Unit = js.native
      
      /**
        * This encodes the Helper version in 1.1.1 (semantic versioning) format.
        */
      val version: String = js.native
      
      /**
        * @see https://dev.twitch.tv/docs/extensions/reference#helper-viewer
        */
      val viewer: Viewer = js.native
      
      /**
        * @see https://dev.twitch.tv/docs/extensions/reference/#helper-actions
        */
      @js.native
      object actions extends js.Object {
        
        /**
          * This function prompts users to follow the specified channel, with a dialog controlled by Twitch.
          *
          * @see https://dev.twitch.tv/docs/extensions/reference/#followchannel
          */
        def followChannel(channelName: String): Unit = js.native
        
        /**
          * This function causes your video-component or video-overlay extension to be minimized.
          *
          * @see https://dev.twitch.tv/docs/extensions/reference/#minimize
          */
        def minimize(): Unit = js.native
        
        /**
          * This function registers a callback that is invoked whenever a user completes an interaction prompted by the followChannel action.
          *
          * @see https://dev.twitch.tv/docs/extensions/reference/#onfollow
          */
        def onFollow(callback: js.Function2[/* didFollow */ Boolean, /* channelName */ String, Unit]): Unit = js.native
        
        /**
          * This function opens a prompt for users to share their identity.
          * After a successful identity link, the Twitch.ext.onAuthorized callback is invoked with the user’s ID.
          *
          * @see https://dev.twitch.tv/docs/extensions/reference/#requestidshare
          */
        def requestIdShare(): Unit = js.native
      }
      
      /**
        * @see https://dev.twitch.tv/docs/extensions/reference#helper-bits
        */
      @js.native
      object bits extends js.Object {
        
        /**
          * This function returns a promise which resolves to an array of products available for Bits,
          * for the extension, if the context supports Bits in Extensions actions. Otherwise, the
          * promise rejects with an error; this can occur, for instance, if the extension is running in
          * an older version of the developer rig or the mobile app, which does not support Bits in
          * Extensions actions.
          *
          * @see https://dev.twitch.tv/docs/extensions/bits/#getproducts
          */
        def getProducts(): js.Promise[js.Array[BitsProduct]] = js.native
        
        /**
          * This function takes a callback that is fired whenever a transaction is cancelled.
          * @param callback The callback that is fired whenever a transaction is cancelled.
          *
          * @see https://dev.twitch.tv/docs/extensions/bits/#ontransactioncancelledcallback
          */
        def onTransactionCancelled(callback: js.Function0[Unit]): Unit = js.native
        
        /**
          * This function registers a callback that is fired whenever a Bits in Extensions transaction
          * is completed.
          * @param callback The callback that is fired.
          *
          * @see https://dev.twitch.tv/docs/extensions/bits/#ontransactioncompletecallbacktransactionobject
          */
        def onTransactionComplete(callback: js.Function1[/* transaction */ BitsTransaction, Unit]): Unit = js.native
        
        /**
          * This function sets the state of the extension helper, so it does not call live services for
          * usage of Bits. Instead, it does a local loopback to the completion handler, after a fixed
          * delay to simulate user approval and process latency.
          * @param useLoopback Whether to use local looback.
          *
          * @see https://dev.twitch.tv/docs/extensions/bits/#setuseloopbackboolean
          */
        def setUseLoopback(useLoopback: Boolean): Unit = js.native
        
        /**
          * Call this function when the viewer hovers over a product in your extension UI, to cause the
          * Twitch UI to display a dialog showing the viewer’s Bits balance.
          * The dialog displays for 1.5 seconds, unless your extension calls showBitsBalance again, in
          * which case the 1.5-second timer resets.
          *
          * This is a “fire-and-forget” function: the extension developer does not need to tell Twitch
          * when the viewer stops hovering over the product.
          *
          * On mobile, this function is ignored.
          *
          * @see https://dev.twitch.tv/docs/extensions/bits/#showbitsbalance
          */
        def showBitsBalance(): Unit = js.native
        
        /**
          * This function redeems a product with the specified SKU for the number of Bits specified in
          * the catalog entry of that product.
          * @param sku
          *
          * @see https://dev.twitch.tv/docs/extensions/bits/#usebitssku
          * @see https://dev.twitch.tv/docs/extensions/bits/#exchanging-bits-for-a-product
          */
        def useBits(sku: String): Unit = js.native
      }
      
      /**
        * @see https://dev.twitch.tv/docs/extensions/reference/#helper-configuration
        */
      @js.native
      object configuration extends js.Object {
        
        /**
          * This property returns the record for the broadcaster segment if one is found; otherwise, undefined.
          */
        val broadcaster: js.UndefOr[Content] = js.native
        
        /**
          * This property returns the record for the developer segment if one is found; otherwise, undefined.
          */
        val developer: js.UndefOr[Content] = js.native
        
        /**
          * This property returns the record for the global segment if one is found; otherwise, undefined.
          */
        val global: js.UndefOr[Content] = js.native
        
        /**
          * This function registers a callback that is called whenever an extension configuration is received.
          * The callback function takes no input and returns nothing. After this is called for the first time,
          * the records for the global, developer and broadcaster segments will be set if the data is available.
          * @param callback The callback that is fired.
          */
        def onChanged(callback: js.Function0[Unit]): Unit = js.native
        
        /**
          * This function can be called by the front end to set an extension configuration.
          * @param segment The configuration segment to set. Valid value. "broadcaster".
          * @param version The version of configuration with which the segment is stored.
          * @param content The string-encoded configuration.
          */
        @JSName("set")
        def set_broadcaster(segment: typingsSlinky.twitchExt.twitchExtStrings.broadcaster, version: String, content: String): Unit = js.native
      }
      
      /**
        * @see https://dev.twitch.tv/docs/extensions/reference/#twitch-extension-feature-flags
        */
      @js.native
      object features extends js.Object {
        
        /**
          * If this flag is true, Bits in Extensions features will work in your extension on the current channel.
          * If this flag is false, disable or hide the Bits in Extensions features in your extension.
          */
        val isBitsEnabled: Boolean = js.native
        
        /**
          * If this flag is true, you can send a chat message to the current channel using Send Extension Chat Message
          * (subject to the authentication requirements documented for that endpoint).
          */
        val isChatEnabled: Boolean = js.native
        
        /**
          * If this flag is true, your extension has the ability to get the subscription status of identity-linked viewers
          * from both the helper in the twitch.ext.viewer.subscriptionStatus object and via the Twitch API.
          */
        val isSubscriptionStatusAvailable: Boolean = js.native
        
        /**
          * This function enables you to receive real-time updates to changes of the features object.
          * If this callback is invoked, you should re-check the Twitch.ext.features object for a change
          * to any feature flag your extension cares about.
          *
          * @param callback The callback is called with an array of feature flags which were updated.
          */
        def onChanged(callback: js.Function1[/* changed */ js.Array[ChangedKey], Unit]): Unit = js.native
      }
    }
  }
}
